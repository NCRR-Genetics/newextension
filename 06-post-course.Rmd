# Continued learning {#post-course}

## What next? First part (placeholder)

TODO: Should be about some of the points mentioned in issue 111, e.g. what can the
participants do to plan/visualize this sort of work-flow, and how to implement
it into their research institutes and environments.

## Reproducible research with R: In the real world

A showcase of how the reproducible work-flow we've gone over in the course is possible in a restricted virtual environment. Case study: The virtual desktop environment used when working on Statistics Denmark (DST)'s researcher services.

**What is the deal?**  
You will likely be working in a virtual environment without administrator rights, so you will not be able to install programs yourself.
Often, you will be logged into a virtual computer with no internet access. From there, you will not be able to access remote locations like GitHub or the online archive where R packages are normally installed from with `install.packages()`.

### Requirements

The requirements are the same as the pre-course tasks, except that the system administrators must do the setup. The good news is that once they've done it, everything is pretty much set up for us!
Contact your system administrator and ask them if R and Git are supported. If not, then ask the administrators to install them. That's a basic service that they should provide.
In the case of Statistics Denmark, they've pre-installed Git, R and RStudio. See \@ref(fig:dst-desktop):

```{r dst-desktop, echo=FALSE, fig.cap="Git, R, and RStudio are already installed."}
knitr::include_graphics(here::here("images/dst_desktop.jpg"))
```

### Packages are accessible!

To allow access to packages in the restricted environment, DST has pre-installed ALL packages on CRAN, so we will be able to access any package from there with the `library()` command.

While we won't be able to use packages from sources other than CRAN (like the r3 package developed for this course), we do have access to more than 15,000 of the most widely used packages (this also means that opening and browsing the packages tab will slow your session down a lot). See Figure \@ref(fig:dst-packages):

```{r dst-packages, echo=FALSE, fig.cap="CRAN packages are already installed."}
knitr::include_graphics(here::here("images/dst_packages.jpg"))
```

### Setting up our project.

**The prodigenr package is available, so we'll set the project up like we normally would (refer to Figure \@ref(fig:prodigenr-project-creation)).**  
We may get a message nudging us to set up our Git config and not just use the defaults. The defaults should be based on your log-on ID (and be somewhat sensible) here, but we can set them ourselves later.

### Activating Git for the project

Normally, we would activate Git with the `usethis::use_git()` command. This may not always work in the DST environment. Instead, we'll activate Git through the RStudio menu tab: `Tools -> Version Control -> Project Setup -> Version control system: Git`, shown in Figure \@ref(fig:dst-git-setup).

```{r dst-git-setup, echo=FALSE, fig.cap="Setting up Git for the project."}
knitr::include_graphics(here::here("images/dst-git-setup.jpg"))
```

After restarting RStudio, you should see the Git icons and tabs.
Now we can set our Git config (since we don't have access to the r3 package, we'll set it with the git2r package here):

```{r dst_git_config, eval=FALSE}
git2r::config(user.name = "My Name Here", user.email = "mynamehere@mymailhere.com")
```

**And now we can make our initial commit to the local Git repository: See Figure \@ref(fig:dst-git-works).**

```{r dst-git-works, echo=FALSE, fig.cap="Initial commit to local repository."}
knitr::include_graphics(here::here("images/dst_git_Works.jpg"))
```

**We will not be able to access an online remote Git repository like GitHub, since we have no internet access from the virtual desktop, but don't worry!**  
We can still use Git with a local repository on the virtual desktop to track our own work - and in a few steps, we'll set up a remote repository and get all the functionality of Git in a collaborative work-flow as well!  

### Setting up a Git remote repository in the virtual environment

If we're working in a team, we will to want to have a remote repository for keeping the latest versions available to everybody on the team.
In the version-control session, we created a remote repository through GitHub's website, and then created a local repository from it by cloning it.  This time, we'll do it all from the terminal, and since we've already set up a local repository, we'll do it the other way round:  

1. Create a blank remote repository in a local folder that all team members have access to.
2. Connect our local repository to it.
3. Push the commits from our local repository to it.

In the end, the only difference here is that the location of the remote is not a GitHub-URL, functionally it is the same.

**Remember: Git is operated through the terminal, not the console, so we go to the terminal tab and type:**

```bash
# Creates the folder for the remote (you can also 
# do this through the File Explorer in Windows of 
# course)
mkdir -p E:/project_directory/git-remote 

# Changes the Git working directory to the 
# remote folder.
cd E:/project_directory/git-remote/ 

# Creates an empty remote repository in the 
# remote folder.
git init --bare 

# Changes the Git working directory back to the R 
# project folder.
cd E:/project_directory/LearningR 

# Links the project to the remote repository
git remote add origin E:/project_directory/git-remote 

# Pushes the local repository to the remote
git push -u origin master 
```

**Notice in Figure \@ref(fig:dst-git-remote) how the Pull and Push icons now have colors:**

```{r dst-git-remote, echo=FALSE, fig.cap="The Remote repository works."}
knitr::include_graphics(here::here("images/dst-git-remote.jpg"))
```

**And that's it! Now we have version control!**  
  
**Are we missing out by not having access to GitHub?**
Not in regards to version control. Since we're already working on a remote virtual desktop where our project collaborators also have access, the repositories here serve the same function as a remote repository like GitHub normally would:  

- A platform for collaboration, where all team members can keep their edits synchronized and work in parallel without losing track of changes.  
- A secure back-up of the entire history of the project in case the dog eats our laptops.

## How R can help us deal with common issues in restricted environments

### Keeping track of file paths

The preset folder structures are often ugly, long, and maze-like. While they can't be edited, using a work-flow that takes advantage of R projects and `here::here()` shown in this course, you don't have to deal with the long path names once you've moved everything into the project folder.  
  
Sometimes, these types of servers will be using a specific software and data file format. Perhaps the data is in a different format, or it is stored in a relational database, e.g SQL.

### Other drawbacks to working in a virtual environment

**There are a lot, but to name a few:**  

- In addition to being a repository, GitHub can also be used as a forum for communicating about the project work-flow (and get feedback/contributions from the public if using a public repository).  
- You cannot copy-paste or conveniently import anything into the virtual environment - including code chunks or scripts.  
- The installed versions of R, RStudio and the packages will only be as up-to-date as the system administrators keep them. Again, if you need something outdated to be updated, don't be afraid to ask them to help you out. However, it can be tricky to keep the updates of all the different packages compatible with each other and with new versions of R, and keeping everything on the cutting edge of new releases is not feasible. In the case of DST, you will be running versions that are several months behind the latest "real-world" releases, even in the most updated times.  

## More formatting syntax in Markdown {#post-course-markdown}

### Lists

Lists are created by adding either `- ` or `1.` to the beginning of a line
and an empty line must be at the start and end of the list.

For unnumbered lists, it looks like:

```markdown
- item 1
- item 2
- item 3
```

which gives...

- item 1
- item 2
- item 3

And numbered lists look like:

```markdown
1. item 1
2. item 2
3. item 3
```

which gives...

1. item 1
2. item 2
3. item 3

### Block quotes

Block quotes are used when you want to emphasize a block of text,
usually for quoting someone. 
You create a block quote by putting a `>` at the beginning of the line,
and as with the lists and headers, 
needs empty lines before and after the text.
So it looks like:

```markdown
> Block quote 
```

which gives...

> Block quote 

### Adding footnotes

Footnotes are added by enclosing a number or word in square brackets (`[]`)
and beginning with an uptick (`^`). It looks like:

```markdown
Footnote[^1] or this[^note].

[^1]: Footnote content
[^note]: Another footnote
```

which gives...

Footnote[^1] or this[^note].

[^1]: Footnote content
[^note]: Another footnote

### Adding links to websites

Including a link to a website in your document is done by surrounding the link text
with square brackets (`[]`) followed by the link URL in brackets (`()`).
There must not be any space between the square brackets 
and the regular brackets (it should look like `[]()`).

```markdown
[Link](https://google.com)
```

which gives...

[Link](https://google.com)

### Inserting (simple) tables

While you can insert tables using Markdown too, 
it isn't recommended to do that for complicated or large tables.
Tables are created by separating columns with `|`,
with the table header being separated by a line that looks like `|:--|`.
A simple example is:

```
|   | Fun | Serious |
|:--|----:|--------:|
| **Happy** | 1234 | 5678 |
| **Sad** | 123 | 456 |
```

which gives...

|   | Fun | Serious |
|:--|:---:|:-------:|
| **Happy** | 1234 | 5678 |
| **Sad** | 123 | 456 |

The `|---:|` or `|:---|` tell the table to left-align or right-align the values
in the column. Center-align is `|:----:|`.

So you can probably imagine,
doing this for larger or even slightly more complicated tables is not practical.
A good alternative approach is to create the table in a spreadsheet,
importing that table into R within a code chunk,
and using `knitr::kable()` to create the table after that.

## Other colour schemes in ggplot2

You can modify ggplot2 colour schemes using many other pre-defined palettes by
installing new R packages, including scientific journal colour palettes
([ggsci]) and even a Wes Anderson ([wesanderson]) or a Stubio Ghibli ([ghibli])
colour palette! 
Also check out the Data Visualization book in the [resources](resources.html)
chapter for more information and learning on visualizing data.

[ggsci]: https://nanx.me/ggsci/index.html
[wesanderson]: https://github.com/karthik/wesanderson
[ghibli]: https://ewenme.github.io/ghibli/

## Other colour schemes in ggplot2

You can modify ggplot2 colour schemes using many other pre-defined palettes by
installing new R packages, including scientific journal colour palettes
([ggsci]) and even a Wes Anderson ([wesanderson]) or a Stubio Ghibli ([ghibli])
colour palette! 
Also check out the Data Visualization book in the [resources](resources.html)
chapter for more information and learning on visualizing data.

[ggsci]: https://nanx.me/ggsci/index.html
[wesanderson]: https://github.com/karthik/wesanderson
[ghibli]: https://ewenme.github.io/ghibli/
